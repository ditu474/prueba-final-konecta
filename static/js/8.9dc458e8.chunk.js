(this["webpackJsonpprueba-final-konecta"]=this["webpackJsonpprueba-final-konecta"]||[]).push([[8],{139:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(170),c=n(140),a=n.n(c),o=n(141),i=n(21),s=n(0),u=n.n(s),l="SEND",f="SUCCESS",j="ERROR",h=function(e,t){var n=e;switch(t.type){case l:return n={response:null,error:null,loading:!0};case f:return n={response:t.responseData,error:null,loading:!1};case j:return n={response:null,error:t.errorMessage,loading:!1};case"RESET":return n={response:null,error:null,loading:!1};default:return n}};function d(e){var t=u.a.useReducer(h,{response:null,loading:!1,error:null}),n=Object(i.a)(t,2),c=n[0],s=n[1],d=u.a.useRef(!0);u.a.useEffect((function(){return function(){d.current=!1}}),[]);var b=u.a.useCallback(function(){var t=Object(o.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:l}),t.prev=1,t.next=4,e(n);case 4:r=t.sent,d.current&&s({type:f,responseData:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),s({type:j,errorMessage:t.t0.message||"Something went wrong!"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(r.a)(Object(r.a)({},c),{},{sendRequest:b})}},142:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return u}));var r=n(140),c=n.n(r),a=n(141),o="https://www.breakingbadapi.com/api",i=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.limit,r=t.offset,a="".concat(o,"/characters?limit=").concat(n,"&offset=").concat(r),e.abrupt("return",fetch(a).then((function(e){if(e.ok)return e.json();throw new Error("Error fetching Breaking Bad characters")})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.author,r=n.trim().replace(" ","+"),a="".concat(o,"/quote?author=").concat(r),e.abrupt("return",fetch(a).then((function(e){if(e.ok)return e.json();throw new Error("Error fetching quotes for ".concat(n))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.quoteId,r="".concat(o,"/quotes/").concat(n),e.abrupt("return",fetch(r).then((function(e){if(e.ok)return e.json();throw new Error("Error fetching quote with ID: ".concat(n))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},302:function(e,t,n){"use strict";n.r(t);var r=n(58),c=n(261),a=n(262),o=n(263),i=n(259),s=n(94),u=n(6),l=n(2),f=Object(s.a)((function(e){return{card:{width:"fit-content",margin:"0 auto"},quote:{fontStyle:"italic",fontSize:"1.2rem"},info:{display:"flex",margin:e.spacing(1,0),alignItems:"center"},h5:{fontWeight:"normal",fontSize:"1rem",margin:e.spacing(0,1)}}})),j=function(e){var t=e.quote,n=f(),r=Object(u.g)();return Object(l.jsxs)(c.a,{variant:"outlined",className:n.card,children:[Object(l.jsxs)(a.a,{children:[Object(l.jsxs)("em",{className:n.quote,children:['"',t.quote,'"']}),Object(l.jsxs)("div",{className:n.info,children:[Object(l.jsx)("label",{children:"Author: "}),Object(l.jsx)("h5",{className:n.h5,children:t.author})]}),Object(l.jsxs)("div",{className:n.info,children:[Object(l.jsx)("label",{children:"Serie: "}),Object(l.jsx)("h5",{className:n.h5,children:t.series})]})]}),Object(l.jsxs)(o.a,{children:[Object(l.jsx)(i.a,{size:"small",color:"secondary",onClick:function(){r.push("/quote/".concat(t.quote_id,"/comments"))},children:"Comentarios"}),Object(l.jsx)(i.a,{size:"small",color:"secondary",onClick:function(){r.push("/quote/".concat(t.quote_id,"/rate"))},children:"Calificaci\xf3n"})]})]})},h=n(15),d=n(21),b=n(0),p=n.n(b),O=n(169),g=n.n(O),m="quoteRate",x=function(){var e=localStorage.getItem(m);return e?JSON.parse(e):[]},v=function(e){try{localStorage.setItem(m,JSON.stringify(e))}catch(t){console.error("Error saving quoteRates: ",t.message)}},w=n(260),q=n(304),S=n(258),k=function(e){var t,n=e.rates;return t=0===n.length?Object(l.jsx)(w.a,{children:Object(l.jsx)(q.a,{primary:"A\xf1ade una calificaci\xf3n"})}):n.map((function(e){return Object(l.jsx)(w.a,{children:Object(l.jsx)(g.a,{count:5,value:e.rate,size:40,isHalf:!0,activeColor:"#ffd700",edit:!1})},e.id)})),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h2",{children:"Historial"}),Object(l.jsx)(S.a,{children:t})]})},y=function(){var e=Object(u.i)().id,t=p.a.useState([]),n=Object(d.a)(t,2),r=n[0],c=n[1],a=p.a.useState(0),o=Object(d.a)(a,2),i=o[0],s=o[1];p.a.useEffect((function(){var t=function(e){var t=x();if(0===t.length)return[];var n=t.find((function(t){return t.id===String(e)}));return n?n.rates:[]}(e);if(c(t),t.length>0){var n=t.reduce((function(e,t){return e+t.rate}),0)/t.length;s(n)}}),[]);return Object(l.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(l.jsxs)("h4",{children:["Promedio: ",i.toFixed(1)]}),Object(l.jsx)(g.a,{count:5,onChange:function(t){!function(e){var t=r.length;s((i*t+e)/(t+1))}(t);var n={id:Math.random()+t,rate:t};c((function(e){return[n].concat(Object(h.a)(e))})),function(e,t){var n=x();if(0!==n.length){var r=n.find((function(t){return t.id===String(e)}));r?(r.rates=[t].concat(Object(h.a)(r.rates)),v(n)):v([{id:e,rates:[t]}].concat(Object(h.a)(n)))}else v([{id:e,rates:[t]}])}(e,n)},size:40,isHalf:!0,activeColor:"#ffd700"}),Object(l.jsx)(k,{rates:r})]})},E=n(139),C=n(142);t.default=function(){var e=Object(u.i)().id,t=Object(u.j)().path,n=Object(E.a)(C.c),c=n.response,a=n.loading,o=n.error,i=n.sendRequest;return p.a.useEffect((function(){i({quoteId:e})}),[e,i]),a?Object(l.jsx)(r.a,{}):o||!c||0===c.length?Object(l.jsxs)("h4",{children:["No se logr\xf3 encontrar la informaci\xf3n de la frase ",e]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(j,{quote:c[0]}),Object(l.jsxs)(u.d,{children:[Object(l.jsx)(u.b,{path:"".concat(t,"/comments"),exact:!0,children:Object(l.jsx)("span",{children:"Comentarios"})}),Object(l.jsx)(u.b,{path:"".concat(t,"/rate"),exact:!0,children:Object(l.jsx)(y,{})})]})]})}}}]);
//# sourceMappingURL=8.9dc458e8.chunk.js.map