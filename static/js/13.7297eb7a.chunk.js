(this["webpackJsonpprueba-final-konecta"]=this["webpackJsonpprueba-final-konecta"]||[]).push([[13],{136:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(152),c=n(138),a=n.n(c),o=n(139),i=n(21),s=n(0),u=n.n(s),l="SEND",f="SUCCESS",d="ERROR",j=function(e,t){var n=e;switch(t.type){case l:return n={response:null,error:null,loading:!0};case f:return n={response:t.responseData,error:null,loading:!1};case d:return n={response:null,error:t.errorMessage,loading:!1};case"RESET":return n={response:null,error:null,loading:!1};default:return n}};function h(e){var t=u.a.useReducer(j,{response:null,loading:!1,error:null}),n=Object(i.a)(t,2),c=n[0],s=n[1],h=u.a.useRef(!0);u.a.useEffect((function(){return function(){h.current=!1}}),[]);var m=u.a.useCallback(function(){var t=Object(o.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:l}),t.prev=1,t.next=4,e(n);case 4:r=t.sent,h.current&&s({type:f,responseData:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),s({type:d,errorMessage:t.t0.message||"Something went wrong!"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(r.a)(Object(r.a)({},c),{},{sendRequest:m})}},137:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return l}));var r=n(138),c=n.n(r),a=n(139),o="https://www.breakingbadapi.com/api",i=function(){var e=Object(a.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(o,"/characters"),e.abrupt("return",fetch(t).then((function(e){if(e.ok)return e.json();throw new Error("Error fetching Breaking Bad characters")})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.limit,r=t.offset,a="".concat(o,"/characters?limit=").concat(n,"&offset=").concat(r),e.abrupt("return",fetch(a).then((function(e){if(e.ok)return e.json();throw new Error("Error fetching Breaking Bad characters")})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.author,r=n.trim().replace(" ","+"),a="".concat(o,"/quote?author=").concat(r),e.abrupt("return",fetch(a).then((function(e){if(e.ok)return e.json();throw new Error("Error fetching quotes for ".concat(n))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.quoteId,r="".concat(o,"/quotes/").concat(n),e.abrupt("return",fetch(r).then((function(e){if(e.ok)return e.json();throw new Error("Error fetching quote with ID: ".concat(n))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},320:function(e,t,n){"use strict";n.r(t);var r=n(50),c=n(15),a=n(21),o=n(0),i=n.n(o),s=n(59),u="quoteComments",l=n(319),f=n(151),d=n(158),j=n(2),h={comment:""},m=function(e){var t=e.onAddComment;return Object(j.jsx)(d.a,{initialValues:h,validate:function(e){var t={},n=function(e){return e?e.length>200?"M\xe1ximo 200 caracteres":"":"No puede estar vacio"}(e.comment);return n&&(t.comment=n),t},onSubmit:function(e,n){var r=n.setSubmitting,c=n.resetForm;t(e.comment.trim()),r(!1),c(h)},children:function(e){var t=e.values,n=e.handleChange,r=e.handleBlur,c=e.handleSubmit,a=e.errors,o=e.touched,i=e.isSubmitting;return Object(j.jsxs)("form",{name:"NewComment",onSubmit:c,className:"center-column-childs",children:[Object(j.jsx)(l.a,{multiline:!0,rows:4,variant:"filled",placeholder:"Escribe un comentario...",type:"text",name:"comment",id:"comment",onChange:n,onBlur:r,value:t.comment,error:!!a.comment&&o.comment,helperText:!!a.comment&&o.comment&&a.comment}),Object(j.jsx)(f.a,{variant:"contained",color:"primary",disabled:i,type:"submit",style:{marginTop:"1rem"},children:"Comentar"})]})}})},b=n(271),O=n(311),p=n(270),v=n(323),x=n(317),g=n(95),w=Object(g.a)({root:{width:"100%",maxWidth:600}}),q=function(e){var t=e.comments,n=w();return Object(j.jsxs)("div",{className:"".concat(n.root," container"),children:[Object(j.jsxs)("h3",{children:["Comentarios (",t.length,")"]}),Object(j.jsx)(b.a,{variant:"outlined",children:Object(j.jsx)(O.a,{children:t.map((function(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)(p.a,{button:!0,children:Object(j.jsx)(v.a,{primary:e.comment})}),Object(j.jsx)(x.a,{})]},e.id)}))})})]})},y=function(e){var t=e.quoteId,n=i.a.useState([]),r=Object(a.a)(n,2),o=r[0],l=r[1];i.a.useEffect((function(){l(function(e){var t=Object(s.a)(u);if(0===t.length)return[];var n=t.find((function(t){return t.id===e}));return n?n.comments:[]}(t))}),[]);return Object(j.jsxs)("div",{style:{margin:"2rem 0",display:"contents"},className:"center-column-childs",children:[Object(j.jsx)(m,{onAddComment:function(e){l((function(n){var r={id:Math.random(),comment:e};return function(e,t){var n=Object(s.a)(u);if(0!==n.length){var r=n.find((function(t){return t.id===e}));r?(r.comments.unshift(t),Object(s.b)(n,u)):Object(s.b)([{id:e,comments:[t]}].concat(Object(c.a)(n)),u)}else Object(s.b)([{id:e,comments:[t]}],u)}(t,r),[r].concat(Object(c.a)(n))}))}}),Object(j.jsx)(q,{comments:o})]})},k=n(272),C=n(273),E=n(6),S=Object(g.a)((function(e){return{card:{width:"fit-content",margin:"0 auto"},quote:{fontStyle:"italic",fontSize:"1.2rem"},info:{display:"flex",margin:e.spacing(1,0),alignItems:"center"},h5:{fontWeight:"normal",fontSize:"1rem",margin:e.spacing(0,1)}}})),N=function(e){var t=e.quote,n=S(),r=Object(E.g)();return Object(j.jsxs)(b.a,{variant:"outlined",className:n.card,children:[Object(j.jsxs)(k.a,{children:[Object(j.jsxs)("em",{className:n.quote,children:['"',t.quote,'"']}),Object(j.jsxs)("div",{className:n.info,children:[Object(j.jsx)("label",{children:"Author: "}),Object(j.jsx)("h5",{className:n.h5,children:t.author})]}),Object(j.jsxs)("div",{className:n.info,children:[Object(j.jsx)("label",{children:"Serie: "}),Object(j.jsx)("h5",{className:n.h5,children:t.series})]})]}),Object(j.jsxs)(C.a,{children:[Object(j.jsx)(f.a,{size:"small",color:"secondary",onClick:function(){r.push("/quote/".concat(t.quote_id,"/comments"))},children:"Comentarios"}),Object(j.jsx)(f.a,{size:"small",color:"secondary",onClick:function(){r.push("/quote/".concat(t.quote_id,"/rate"))},children:"Calificaci\xf3n"})]})]})},R=n(185),I=n.n(R),z="quoteRate",B=function(e){var t,n=e.rates;return t=0===n.length?Object(j.jsx)(p.a,{children:Object(j.jsx)(v.a,{primary:"A\xf1ade una calificaci\xf3n"})}):n.map((function(e){return Object(j.jsx)(p.a,{children:Object(j.jsx)(I.a,{count:5,value:e.rate,size:40,isHalf:!0,activeColor:"#ffd700",edit:!1})},e.id)})),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"Historial"}),Object(j.jsx)(O.a,{children:t})]})},M=function(e){var t=e.quoteId,n=i.a.useState([]),r=Object(a.a)(n,2),o=r[0],u=r[1],l=i.a.useState(0),f=Object(a.a)(l,2),d=f[0],h=f[1];i.a.useEffect((function(){var e=function(e){var t=Object(s.a)(z);if(0===t.length)return[];var n=t.find((function(t){return t.id===e}));return n?n.rates:[]}(t);if(u(e),e.length>0){var n=e.reduce((function(e,t){return e+t.rate}),0)/e.length;h(n)}}),[]);return Object(j.jsxs)("div",{className:"center-column-childs",children:[Object(j.jsxs)("h4",{children:["Promedio: ",d.toFixed(1)]}),Object(j.jsx)(I.a,{count:5,onChange:function(e){!function(e){var t=o.length;h((d*t+e)/(t+1))}(e);var n={id:Math.random()+e,rate:e};u((function(e){return[n].concat(Object(c.a)(e))})),function(e,t){var n=Object(s.a)(z);if(0!==n.length){var r=n.find((function(t){return t.id===e}));r?(r.rates=[t].concat(Object(c.a)(r.rates)),Object(s.b)(n,z)):Object(s.b)([{id:e,rates:[t]}].concat(Object(c.a)(n)),z)}else Object(s.b)([{id:e,rates:[t]}],z)}(t,n)},size:40,isHalf:!0,activeColor:"#ffd700"}),Object(j.jsx)(B,{rates:o})]})},A=n(136),D=n(137);t.default=function(){var e=+Object(E.i)().id,t=Object(E.j)().path,n=Object(A.a)(D.d),c=n.response,a=n.loading,o=n.error,s=n.sendRequest;return i.a.useEffect((function(){s({quoteId:e})}),[e,s]),a?Object(j.jsx)(r.a,{}):o||!c||0===c.length?Object(j.jsxs)("h4",{children:["No se logr\xf3 encontrar la informaci\xf3n de la frase ",e]}):Object(j.jsxs)("div",{className:"center-column-childs",children:[Object(j.jsx)(N,{quote:c[0]}),Object(j.jsxs)(E.d,{children:[Object(j.jsx)(E.b,{path:"".concat(t,"/comments"),exact:!0,children:Object(j.jsx)(y,{quoteId:e})}),Object(j.jsx)(E.b,{path:"".concat(t,"/rate"),exact:!0,children:Object(j.jsx)(M,{quoteId:e})})]})]})}}}]);
//# sourceMappingURL=13.7297eb7a.chunk.js.map