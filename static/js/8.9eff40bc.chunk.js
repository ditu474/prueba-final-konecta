(this["webpackJsonpprueba-final-konecta"]=this["webpackJsonpprueba-final-konecta"]||[]).push([[8],{139:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(171),a=n(140),o=n.n(a),c=n(141),i=n(21),u=n(0),s=n.n(u),l="SEND",f="SUCCESS",d="ERROR",h=function(e,t){var n=e;switch(t.type){case l:return n={response:null,error:null,loading:!0};case f:return n={response:t.responseData,error:null,loading:!1};case d:return n={response:null,error:t.errorMessage,loading:!1};case"RESET":return n={response:null,error:null,loading:!1};default:return n}};function m(e){var t=s.a.useReducer(h,{response:null,loading:!1,error:null}),n=Object(i.a)(t,2),a=n[0],u=n[1],m=s.a.useRef(!0);s.a.useEffect((function(){return function(){m.current=!1}}),[]);var b=s.a.useCallback(function(){var t=Object(c.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u({type:l}),t.prev=1,t.next=4,e(n);case 4:r=t.sent,m.current&&u({type:f,responseData:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),u({type:d,errorMessage:t.t0.message||"Something went wrong!"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(r.a)(Object(r.a)({},a),{},{sendRequest:b})}},142:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return s}));var r=n(140),a=n.n(r),o=n(141),c="https://www.breakingbadapi.com/api",i=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.limit,r=t.offset,o="".concat(c,"/characters?limit=").concat(n,"&offset=").concat(r),e.abrupt("return",fetch(o).then((function(e){if(e.ok)return e.json();throw new Error("Error fetching Breaking Bad characters")})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.author,r=n.trim().replace(" ","+"),o="".concat(c,"/quote?author=").concat(r),e.abrupt("return",fetch(o).then((function(e){if(e.ok)return e.json();throw new Error("Error fetching quotes for ".concat(n))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.quoteId,r="".concat(c,"/quotes/").concat(n),e.abrupt("return",fetch(r).then((function(e){if(e.ok)return e.json();throw new Error("Error fetching quote with ID: ".concat(n))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},170:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&i.return&&i.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),o=s(a),c=s(n(5)),i=s(n(264)),u=s(n(265));function s(e){return e&&e.__esModule?e:{default:e}}var l={overflow:"hidden",position:"relative"};function f(e,t){return"\n    .react-stars-"+t+":before {\n      position: absolute;\n      overflow: hidden;\n      display: block;\n      z-index: 1;\n      top: 0; left: 0;\n      width: 50%;\n      content: attr(data-forhalf);\n      color: "+e+";\n  }"}function d(e){var t=(0,a.useState)(""),n=r(t,2),c=n[0],s=n[1],d=(0,a.useState)(0),h=r(d,2),m=h[0],b=h[1],v=(0,a.useState)([]),j=r(v,2),p=j[0],O=j[1],g=(0,a.useState)(!1),x=r(g,2),y=x[0],w=x[1],S=(0,i.default)(e),I=r(S,2),C=I[0],k=I[1],M=(0,a.useState)(0),N=r(M,2),E=N[0],q=N[1],H=(0,a.useState)(!1),A=r(H,2),z=A[0],_=A[1],R=(0,a.useState)(""),D=r(R,2),T=D[0],L=D[1];function P(e){"undefined"===typeof e&&(e=C.isHalf?Math.floor(m):Math.round(m));for(var t=[],n=0;n<C.count;n++)t.push({active:n<=e-1});return t}function B(e){if(C.edit){var t=Number(e.currentTarget.getAttribute("data-index"));if(C.isHalf){var n=F(e);_(n),n&&(t+=1),q(t)}else t+=1;!function(e){var t=p.filter((function(e){return e.active}));e!==t.length&&O(P(e))}(t)}}function F(e){var t=e.target.getBoundingClientRect(),n=e.clientX-t.left;return(n=Math.round(Math.abs(n)))>t.width/2}function U(){C.edit&&(W(m),O(P()))}function W(e){C.isHalf&&(_(function(e){return e%1===0}(e)),q(Math.floor(e)))}function J(e){if(C.edit){var t=Number(e.currentTarget.getAttribute("data-index")),n=void 0;if(C.isHalf){var r=F(e);_(r),r&&(t+=1),n=r?t:t+.5,q(t)}else n=t+=1;K(n)}}function K(t){t!==m&&(O(P(t)),b(t),e.onChange(t))}return(0,a.useEffect)((function(){var t,n;!function(){var t="react-stars";L(e.classNames+" "+t)}(),t=e.value,n=e.count,b(t<0||t>n?0:t),O(P(e.value)),k(e),s((Math.random()+"").replace(".","")),w(function(e){return!e.isHalf&&e.emptyIcon&&e.filledIcon||e.isHalf&&e.emptyIcon&&e.halfIcon&&e.filledIcon}(e)),q(Math.floor(e.value)),_(e.isHalf&&e.value%1<.5)}),[]),o.default.createElement("div",{className:"react-stars-wrapper-"+c,style:{display:"flex"}},o.default.createElement("div",{tabIndex:C.a11y&&C.edit?0:null,"aria-label":"add rating by typing an integer from 0 to 5 or pressing arrow keys",onKeyDown:function(e){if(C.a11y||C.edit){var t=e.key,n=m,r=Number(t);r?Number.isInteger(r)&&r>0&&r<=C.count&&(n=r):("ArrowUp"===t||"ArrowRight"===t)&&n<C.count?(e.preventDefault(),n+=C.isHalf?.5:1):("ArrowDown"===t||"ArrowLeft"===t)&&n>.5&&(e.preventDefault(),n-=C.isHalf?.5:1),W(n),K(n)}},className:T,style:l},C.isHalf&&function(){return o.default.createElement("style",{dangerouslySetInnerHTML:{__html:y?(e=C.activeColor,"\n          span.react-stars-half > * {\n          color: "+e+";\n      }"):f(C.activeColor,c)}});var e}(),p.map((function(e,t){return o.default.createElement(u.default,{key:t,index:t,active:e.active,config:C,onMouseOver:B,onMouseLeave:U,onClick:J,halfStarHidden:z,halfStarAt:E,isUsingIcons:y,uniqueness:c})})),o.default.createElement("p",{style:{position:"absolute",left:"-200rem"},role:"status"},m)))}d.propTypes={classNames:c.default.string,edit:c.default.bool,half:c.default.bool,value:c.default.number,count:c.default.number,char:c.default.string,size:c.default.number,color:c.default.string,activeColor:c.default.string,emptyIcon:c.default.element,halfIcon:c.default.element,filledIcon:c.default.element,a11y:c.default.bool},d.defaultProps={edit:!0,half:!1,value:0,count:5,char:"\u2605",size:15,color:"gray",activeColor:"#ffd700",a11y:!0,onChange:function(){}},t.default=d},264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{!r&&i.return&&i.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e){var t=(0,a.useState)(e.count),n=r(t,2),o=n[0],c=n[1],i=(0,a.useState)(e.size),u=r(i,2),s=u[0],l=u[1],f=(0,a.useState)(e.char),d=r(f,2),h=d[0],m=d[1],b=(0,a.useState)(e.color),v=r(b,2),j=v[0],p=v[1],O=(0,a.useState)(e.activeColor),g=r(O,2),x=g[0],y=g[1],w=(0,a.useState)(e.isHalf),S=r(w,2),I=S[0],C=S[1],k=(0,a.useState)(e.edit),M=r(k,2),N=M[0],E=M[1],q=(0,a.useState)(e.emptyIcon),H=r(q,2),A=H[0],z=H[1],_=(0,a.useState)(e.halfIcon),R=r(_,2),D=R[0],T=R[1],L=(0,a.useState)(e.filledIcon),P=r(L,2),B=P[0],F=P[1],U=(0,a.useState)(e.a11y),W=r(U,2),J=W[0],K=W[1];return[{count:o,size:s,char:h,color:j,activeColor:x,isHalf:I,edit:N,emptyIcon:A,halfIcon:D,filledIcon:B,a11y:J},function(e){c(e.count),l(e.size),m(e.char),p(e.color),y(e.activeColor),C(e.isHalf),E(e.edit),z(e.emptyIcon),T(e.halfIcon),F(e.filledIcon),K(e.a11y)}]};var a=n(0)},265:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t=e.index,n=e.active,a=e.config,o=e.onMouseOver,u=e.onMouseLeave,s=e.onClick,l=e.halfStarHidden,f=e.halfStarAt,d=e.isUsingIcons,h=e.uniqueness,m=a.color,b=a.activeColor,v=a.size,j=a.char,p=a.isHalf,O=a.edit,g=a.halfIcon,x=a.emptyIcon,y=a.filledIcon,w="",S=!1;p&&!l&&f===t&&(w=d?"react-stars-half":"react-stars-"+h,S=!0);var I=r({},i,{color:n?b:m,cursor:O?"pointer":"default",fontSize:v+"px"});return c.default.createElement("span",{className:w,style:I,key:t,"data-index":t,"data-forhalf":y?t:j,onMouseOver:o,onMouseMove:o,onMouseLeave:u,onClick:s},d?n?y:!n&&S?g:x:j)};var a,o=n(0),c=(a=o)&&a.__esModule?a:{default:a};var i={position:"relative",overflow:"hidden",cursor:"pointer",display:"block",float:"left"}},302:function(e,t,n){"use strict";n.r(t);var r=n(58),a=n(15),o=n(21),c=n(0),i=n.n(c),u=n(59),s="quoteComments",l=n(301),f=n(290),d=n(172),h=n(2),m={comment:""},b=function(e){var t=e.onAddComment;return Object(h.jsx)(d.a,{initialValues:m,validate:function(e){var t={},n=function(e){return e?e.length>200?"M\xe1ximo 200 caracteres":"":"No puede estar vacio"}(e.comment);return n&&(t.comment=n),t},onSubmit:function(e,n){var r=n.setSubmitting,a=n.resetForm;t(e.comment.trim()),r(!1),a(m)},children:function(e){var t=e.values,n=e.handleChange,r=e.handleBlur,a=e.handleSubmit,o=e.errors,c=e.touched,i=e.isSubmitting;return Object(h.jsxs)("form",{name:"NewComment",onSubmit:a,className:"center-column-childs",children:[Object(h.jsx)(l.a,{multiline:!0,rows:4,variant:"filled",placeholder:"Escribe un comentario...",type:"text",name:"comment",id:"comment",onChange:n,onBlur:r,value:t.comment,error:!!o.comment&&c.comment,helperText:!!o.comment&&c.comment&&o.comment}),Object(h.jsx)(f.a,{variant:"contained",color:"primary",disabled:i,type:"submit",style:{marginTop:"1rem"},children:"Comentar"})]})}})},v=n(292),j=n(289),p=n(291),O=n(305),g=n(1),x=n(3),y=(n(5),n(4)),w=n(7),S=n(23),I=c.forwardRef((function(e,t){var n=e.absolute,r=void 0!==n&&n,a=e.classes,o=e.className,i=e.component,u=void 0===i?"hr":i,s=e.flexItem,l=void 0!==s&&s,f=e.light,d=void 0!==f&&f,h=e.orientation,m=void 0===h?"horizontal":h,b=e.role,v=void 0===b?"hr"!==u?"separator":void 0:b,j=e.variant,p=void 0===j?"fullWidth":j,O=Object(x.a)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return c.createElement(u,Object(g.a)({className:Object(y.a)(a.root,o,"fullWidth"!==p&&a[p],r&&a.absolute,l&&a.flexItem,d&&a.light,"vertical"===m&&a.vertical),role:v,ref:t},O))})),C=Object(w.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(S.c)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(I),k=n(95),M=Object(k.a)({root:{width:"100%",maxWidth:600}}),N=function(e){var t=e.comments,n=M();return Object(h.jsxs)("div",{className:n.root,children:[Object(h.jsxs)("h3",{children:["Comentarios (",t.length,")"]}),Object(h.jsx)(v.a,{variant:"outlined",children:Object(h.jsx)(j.a,{children:t.map((function(e){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(p.a,{button:!0,children:Object(h.jsx)(O.a,{primary:e.comment})},e.id),Object(h.jsx)(C,{})]})}))})})]})},E=function(e){var t=e.quoteId,n=i.a.useState([]),r=Object(o.a)(n,2),c=r[0],l=r[1];i.a.useEffect((function(){l(function(e){var t=Object(u.a)(s);if(0===t.length)return[];var n=t.find((function(t){return t.id===e}));return n?n.comments:[]}(t))}),[]);return Object(h.jsxs)("div",{style:{margin:"2rem 0"},className:"center-column-childs",children:[Object(h.jsx)(b,{onAddComment:function(e){l((function(n){var r={id:Math.random(),comment:e};return function(e,t){var n=Object(u.a)(s);if(0!==n.length){var r=n.find((function(t){return t.id===e}));r?(r.comments.unshift(t),Object(u.b)(n,s)):Object(u.b)([{id:e,comments:[t]}].concat(Object(a.a)(n)),s)}else Object(u.b)([{id:e,comments:[t]}],s)}(t,r),[r].concat(Object(a.a)(n))}))}}),Object(h.jsx)(N,{comments:c})]})},q=n(293),H=n(294),A=n(6),z=Object(k.a)((function(e){return{card:{width:"fit-content",margin:"0 auto"},quote:{fontStyle:"italic",fontSize:"1.2rem"},info:{display:"flex",margin:e.spacing(1,0),alignItems:"center"},h5:{fontWeight:"normal",fontSize:"1rem",margin:e.spacing(0,1)}}})),_=function(e){var t=e.quote,n=z(),r=Object(A.g)();return Object(h.jsxs)(v.a,{variant:"outlined",className:n.card,children:[Object(h.jsxs)(q.a,{children:[Object(h.jsxs)("em",{className:n.quote,children:['"',t.quote,'"']}),Object(h.jsxs)("div",{className:n.info,children:[Object(h.jsx)("label",{children:"Author: "}),Object(h.jsx)("h5",{className:n.h5,children:t.author})]}),Object(h.jsxs)("div",{className:n.info,children:[Object(h.jsx)("label",{children:"Serie: "}),Object(h.jsx)("h5",{className:n.h5,children:t.series})]})]}),Object(h.jsxs)(H.a,{children:[Object(h.jsx)(f.a,{size:"small",color:"secondary",onClick:function(){r.push("/quote/".concat(t.quote_id,"/comments"))},children:"Comentarios"}),Object(h.jsx)(f.a,{size:"small",color:"secondary",onClick:function(){r.push("/quote/".concat(t.quote_id,"/rate"))},children:"Calificaci\xf3n"})]})]})},R=n(170),D=n.n(R),T="quoteRate",L=function(e){var t,n=e.rates;return t=0===n.length?Object(h.jsx)(p.a,{children:Object(h.jsx)(O.a,{primary:"A\xf1ade una calificaci\xf3n"})}):n.map((function(e){return Object(h.jsx)(p.a,{children:Object(h.jsx)(D.a,{count:5,value:e.rate,size:40,isHalf:!0,activeColor:"#ffd700",edit:!1})},e.id)})),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{children:"Historial"}),Object(h.jsx)(j.a,{children:t})]})},P=function(e){var t=e.quoteId,n=i.a.useState([]),r=Object(o.a)(n,2),c=r[0],s=r[1],l=i.a.useState(0),f=Object(o.a)(l,2),d=f[0],m=f[1];i.a.useEffect((function(){var e=function(e){var t=Object(u.a)(T);if(0===t.length)return[];var n=t.find((function(t){return t.id===e}));return n?n.rates:[]}(t);if(s(e),e.length>0){var n=e.reduce((function(e,t){return e+t.rate}),0)/e.length;m(n)}}),[]);return Object(h.jsxs)("div",{className:"center-column-childs",children:[Object(h.jsxs)("h4",{children:["Promedio: ",d.toFixed(1)]}),Object(h.jsx)(D.a,{count:5,onChange:function(e){!function(e){var t=c.length;m((d*t+e)/(t+1))}(e);var n={id:Math.random()+e,rate:e};s((function(e){return[n].concat(Object(a.a)(e))})),function(e,t){var n=Object(u.a)(T);if(0!==n.length){var r=n.find((function(t){return t.id===e}));r?(r.rates=[t].concat(Object(a.a)(r.rates)),Object(u.b)(n,T)):Object(u.b)([{id:e,rates:[t]}].concat(Object(a.a)(n)),T)}else Object(u.b)([{id:e,rates:[t]}],T)}(t,n)},size:40,isHalf:!0,activeColor:"#ffd700"}),Object(h.jsx)(L,{rates:c})]})},B=n(139),F=n(142);t.default=function(){var e=+Object(A.i)().id,t=Object(A.j)().path,n=Object(B.a)(F.c),a=n.response,o=n.loading,c=n.error,u=n.sendRequest;return i.a.useEffect((function(){u({quoteId:e})}),[e,u]),o?Object(h.jsx)(r.a,{}):c||!a||0===a.length?Object(h.jsxs)("h4",{children:["No se logr\xf3 encontrar la informaci\xf3n de la frase ",e]}):Object(h.jsxs)("div",{className:"center-column-childs",children:[Object(h.jsx)(_,{quote:a[0]}),Object(h.jsxs)(A.d,{children:[Object(h.jsx)(A.b,{path:"".concat(t,"/comments"),exact:!0,children:Object(h.jsx)(E,{quoteId:e})}),Object(h.jsx)(A.b,{path:"".concat(t,"/rate"),exact:!0,children:Object(h.jsx)(P,{quoteId:e})})]})]})}}}]);
//# sourceMappingURL=8.9eff40bc.chunk.js.map